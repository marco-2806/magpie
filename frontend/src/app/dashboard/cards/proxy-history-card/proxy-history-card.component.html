<p-card [styleClass]="styleClass">
  <ng-template pTemplate="header">
    <div class="flex justify-between items-center w-full p-3">
      <h3 class="text-white m-0">{{ title }}</h3>
      <div class="flex gap-2">
        <p-button
          icon="pi pi-refresh"
          styleClass="p-button-rounded p-button-text p-button-sm text-neutral-400"
          [loading]="refreshing"
          [disabled]="refreshing"
          (onClick)="onRefreshClick()">
        </p-button>
      </div>
    </div>
  </ng-template>

  @if (history.length) {
    <div class="transaction-list">
      @for (check of history; track check.id) {
        <div class="flex items-center gap-3 p-3 border-b border-neutral-800">
          <div class="transaction-icon">
            <i class="{{ getStatusIcon(check.status) }} text-xl" [ngStyle]="{ color: getStatusColor(check.status) }"></i>
          </div>
          <div class="flex-1">
            <div class="text-white text-sm font-medium">{{ check.ip }}</div>
            <div class="text-neutral-400 text-xs">
              @if (check.date; as date) {
                {{ date | date:'MMM dd, yyyy' }}
              }
              {{ check.time }}
            </div>
          </div>
          <div class="text-right text-sm font-medium text-neutral-300">
            {{ formatLatency(check.latency) }}
          </div>
        </div>
      }
    </div>
  } @else {
    <div class="flex flex-col items-center justify-center text-center gap-3 py-10 px-6 text-neutral-400">
      <i class="pi pi-database text-3xl text-neutral-600"></i>
      <p class="text-sm">
        We havenâ€™t captured any proxy checks yet. Refresh or come back later once the first checks are processed.
      </p>
    </div>
  }
</p-card>
