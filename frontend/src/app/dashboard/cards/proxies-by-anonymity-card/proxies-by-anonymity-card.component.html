<p-card [styleClass]="styleClass">
  <ng-template pTemplate="header">
    <div class="flex justify-between items-center w-full p-3">
      <h3 class="text-white m-0">{{ title }}</h3>
    </div>
  </ng-template>

  <div class="p-4">
    @if (summary; as info) {
      <div class="bg-neutral-800 p-2 rounded-xl">
        <div class="rounded-xl bg-neutral-700 px-3 py-2 flex items-center justify-between mb-3">
          <span class="text-neutral-300 text-sm">Live Proxies</span>
          <span class="text-xs flex items-center gap-1" [ngClass]="info.change >= 0 ? 'text-green-400' : 'text-red-400'">
            <i class="pi" [ngClass]="info.change >= 0 ? 'pi-arrow-up-right' : 'pi-arrow-down-left'"></i>
            {{ (info.change * 100) | number:'1.0-0' }}%
          </span>
        </div>
        <div class="text-center text-3xl font-bold text-white">
          {{ info.total | number }}
        </div>
      </div>
    }

    <div class="grid grid-cols-3 gap-3 mt-7 mb-5">
      @for (s of segments; track s.name) {
        <div class="rounded-2xl bg-neutral-800/60 p-3">
          <div class="flex items-center justify-between text-xs text-neutral-400 mb-2">
            <span>{{ s.name }}</span>
            <span class="flex items-center gap-1" [ngClass]="s.change >= 0 ? 'text-green-400' : 'text-red-400'">
              <i class="pi" [ngClass]="s.change >= 0 ? 'pi-arrow-up' : 'pi-arrow-down'"></i>
              {{ (s.change * 100) | number:'1.0-0' }}%
            </span>
          </div>

          <div class="relative h-28 rounded-xl bg-neutral-900/60 overflow-hidden flex items-end">
            <div class="absolute top-1 left-1/2 -translate-x-1/2 w-2 h-2 rounded-full" [ngStyle]="{ 'background-color': s.dotColor }"></div>
            <div class="absolute top-3 left-1/2 -translate-x-1/2 h-[calc(100%-42px)] border-l border-dashed border-neutral-600"></div>

            <div class="w-full rounded-xl text-center text-neutral-200 text-sm py-1" [ngClass]="s.barClass" [style.height]="getHeight(s.share)">
              {{ s.count | number }}
            </div>
          </div>
        </div>
      }
    </div>
  </div>
</p-card>
